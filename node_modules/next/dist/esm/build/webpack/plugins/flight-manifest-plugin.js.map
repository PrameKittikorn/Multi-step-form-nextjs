{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["path","webpack","sources","CLIENT_REFERENCE_MANIFEST","SYSTEM_ENTRYPOINTS","relative","isClientComponentEntryModule","isCSSMod","getProxiedPluginState","traverseModules","nonNullable","WEBPACK_LAYERS","pluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","ClientReferenceManifestPlugin","constructor","options","dev","appDir","appDirBase","dirname","sep","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","make","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","clientModules","entryCSSFiles","clientRequestsSet","collectClientRequest","mod","resource","buildInfo","rsc","requests","forEach","r","add","chunkGroups","chunkGroup","getAppPathRequiredChunks","chunks","map","requiredChunk","has","files","file","endsWith","id","flat","filter","requiredChunks","chunkEntryName","test","replace","modules","getFiles","f","startsWith","recordModule","isCSSModule","layer","appClient","type","_identifier","slice","lastIndexOf","push","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","resourceResolveData","isAsyncModule","esmResource","addClientReference","exportName","async","edgeExportName","addSSRIdMapping","chunk","chunkModules","chunkGraph","getChunkModulesIterable","modId","getModuleId","anyModule","concatenatedMod","json","JSON","stringify","undefined","RawSource"],"mappings":"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"}
{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/refresh-reducer.ts"],"names":["fetchServerResponse","createRecordFromThenable","readRecordValue","createHrefFromUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","handleExternalUrl","handleMutable","CacheStates","fillLazyItemsTillLeafWithHead","refreshReducer","state","action","cache","mutable","origin","href","canonicalUrl","isForCurrentTree","JSON","stringify","previousTree","tree","data","URL","nextUrl","buildId","flightData","canonicalUrlOverride","pushRef","pendingPush","currentTree","flightDataPath","length","console","log","treePatch","newTree","Error","canonicalUrlOverrideHref","undefined","subTreeData","head","slice","status","READY","prefetchCache","Map","patchedTree"],"mappings":"AAAA,SAASA,mBAAmB,QAAQ,2BAA0B;AAC9D,SAASC,wBAAwB,QAAQ,iCAAgC;AACzE,SAASC,eAAe,QAAQ,uBAAsB;AACtD,SAASC,iBAAiB,QAAQ,0BAAyB;AAC3D,SAASC,2BAA2B,QAAQ,sCAAqC;AACjF,SAASC,2BAA2B,QAAQ,sCAAqC;AAMjF,SAASC,iBAAiB,QAAQ,qBAAoB;AACtD,SAASC,aAAa,QAAQ,oBAAmB;AACjD,SAASC,WAAW,QAAQ,4CAA2C;AACvE,SAASC,6BAA6B,QAAQ,yCAAwC;AAEtF,OAAO,SAASC,eACdC,KAA2B,EAC3BC,MAAqB,EACP;IACd,MAAM,EAAEC,MAAK,EAAEC,QAAO,EAAEC,OAAM,EAAE,GAAGH;IACnC,MAAMI,OAAOL,MAAMM,YAAY;IAE/B,MAAMC,mBACJC,KAAKC,SAAS,CAACN,QAAQO,YAAY,MAAMF,KAAKC,SAAS,CAACT,MAAMW,IAAI;IAEpE,IAAIJ,kBAAkB;QACpB,OAAOX,cAAcI,OAAOG;IAC9B,CAAC;IAED,IAAI,CAACD,MAAMU,IAAI,EAAE;QACf,uDAAuD;QACvD,wCAAwC;QACxCV,MAAMU,IAAI,GAAGtB,yBACXD,oBACE,IAAIwB,IAAIR,MAAMD,SACd;YAACJ,MAAMW,IAAI,CAAC,EAAE;YAAEX,MAAMW,IAAI,CAAC,EAAE;YAAEX,MAAMW,IAAI,CAAC,EAAE;YAAE;SAAU,EACxDX,MAAMc,OAAO,EACbd,MAAMe,OAAO;IAGnB,CAAC;IACD,MAAM,CAACC,YAAYC,qBAAqB,GAAG1B,gBAAgBW,MAAMU,IAAI;IAErE,4DAA4D;IAC5D,IAAI,OAAOI,eAAe,UAAU;QAClC,OAAOrB,kBACLK,OACAG,SACAa,YACAhB,MAAMkB,OAAO,CAACC,WAAW;IAE7B,CAAC;IAED,2DAA2D;IAC3DjB,MAAMU,IAAI,GAAG,IAAI;IAEjB,IAAIQ,cAAcpB,MAAMW,IAAI;IAE5B,KAAK,MAAMU,kBAAkBL,WAAY;QACvC,oFAAoF;QACpF,IAAIK,eAAeC,MAAM,KAAK,GAAG;YAC/B,oCAAoC;YACpCC,QAAQC,GAAG,CAAC;YACZ,OAAOxB;QACT,CAAC;QAED,2GAA2G;QAC3G,MAAM,CAACyB,UAAU,GAAGJ;QACpB,MAAMK,UAAUjC,4BACd,sBAAsB;QACtB;YAAC;SAAG,EACJ2B,aACAK;QAGF,IAAIC,YAAY,IAAI,EAAE;YACpB,MAAM,IAAIC,MAAM,oBAAmB;QACrC,CAAC;QAED,IAAIjC,4BAA4B0B,aAAaM,UAAU;YACrD,OAAO/B,kBAAkBK,OAAOG,SAASE,MAAML,MAAMkB,OAAO,CAACC,WAAW;QAC1E,CAAC;QAED,MAAMS,2BAA2BX,uBAC7BzB,kBAAkByB,wBAClBY,SAAS;QAEb,IAAIZ,sBAAsB;YACxBd,QAAQG,YAAY,GAAGsB;QACzB,CAAC;QAED,0DAA0D;QAC1D,MAAM,CAACE,aAAaC,KAAK,GAAGV,eAAeW,KAAK,CAAC,CAAC;QAElD,8FAA8F;QAC9F,IAAIF,gBAAgB,IAAI,EAAE;YACxB5B,MAAM+B,MAAM,GAAGpC,YAAYqC,KAAK;YAChChC,MAAM4B,WAAW,GAAGA;YACpBhC,8BACEI,OACA,4FAA4F;YAC5F2B,WACAJ,WACAM;YAEF5B,QAAQD,KAAK,GAAGA;YAChBC,QAAQgC,aAAa,GAAG,IAAIC;QAC9B,CAAC;QAEDjC,QAAQO,YAAY,GAAGU;QACvBjB,QAAQkC,WAAW,GAAGX;QACtBvB,QAAQG,YAAY,GAAGD;QAEvBe,cAAcM;IAChB;IAEA,OAAO9B,cAAcI,OAAOG;AAC9B,CAAC"}
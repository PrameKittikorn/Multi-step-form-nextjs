{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/navigate-reducer.ts"],"names":["handleExternalUrl","navigateReducer","state","mutable","url","pendingPush","previousTree","tree","mpaNavigation","canonicalUrl","scrollableSegments","undefined","handleMutable","generateSegmentsFromPatch","flightRouterPatch","segments","segment","parallelRoutes","Object","keys","length","parallelRouteKey","parallelRoute","entries","childSegment","push","addRefetchToLeafSegments","newCache","currentCache","flightSegmentPath","treePatch","data","appliedPatch","status","CacheStates","READY","subTreeData","Map","segmentPathsToFill","map","segmentPaths","res","fillCacheWithDataProperty","bailOptimistic","action","isExternalUrl","navigateType","cache","forceOptimisticNavigation","pathname","hash","href","createHrefFromUrl","prunePrefetchCache","prefetchCache","isForCurrentTree","JSON","stringify","toString","prefetchValues","get","kind","PrefetchKind","TEMPORARY","split","optimisticTree","createOptimisticTree","temporaryCacheNode","fetchResponse","createRecordFromThenable","fetchServerResponse","nextUrl","buildId","optimisticFlightSegmentPath","slice","flat","patchedTree","hashFragment","set","Promise","resolve","prefetchTime","Date","now","treeAtTimeOfPrefetch","lastUsedTime","newPrefetchValue","prefetchEntryCacheStatus","getPrefetchEntryCacheStatus","flightData","canonicalUrlOverride","readRecordValue","currentTree","flightDataPath","newTree","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","applied","applyFlightData","PrefetchCacheEntryStatus","reusable","stale","hardNavigate","shouldHardNavigate","invalidateCacheBelowFlightSegmentPath","subSegment","scrollableSegmentPath"],"mappings":";;;;;;;;;;;;;;;IAiCgBA,iBAAiB;eAAjBA;;IAwEAC,eAAe;eAAfA;;;kCAtGT;qCAK6B;0CACK;iCACT;mCACE;uDACoB;2CACZ;sCACL;6CACO;oCACT;6CACS;oCAOrC;+BACuB;iCACE;6CAIzB;oCAC4B;AAE5B,SAASD,kBACdE,KAA2B,EAC3BC,OAAgB,EAChBC,GAAW,EACXC,WAAoB,EACpB;IACAF,QAAQG,YAAY,GAAGJ,MAAMK,IAAI;IACjCJ,QAAQK,aAAa,GAAG,IAAI;IAC5BL,QAAQM,YAAY,GAAGL;IACvBD,QAAQE,WAAW,GAAGA;IACtBF,QAAQO,kBAAkB,GAAGC;IAE7B,OAAOC,IAAAA,4BAAa,EAACV,OAAOC;AAC9B;AAEA,SAASU,0BACPC,iBAAoC,EACf;IACrB,MAAMC,WAAgC,EAAE;IACxC,MAAM,CAACC,SAASC,eAAe,GAAGH;IAElC,IAAII,OAAOC,IAAI,CAACF,gBAAgBG,MAAM,KAAK,GAAG;QAC5C,OAAO;YAAC;gBAACJ;aAAQ;SAAC;IACpB,CAAC;IAED,KAAK,MAAM,CAACK,kBAAkBC,cAAc,IAAIJ,OAAOK,OAAO,CAC5DN,gBACC;QACD,KAAK,MAAMO,gBAAgBX,0BAA0BS,eAAgB;YACnE,mEAAmE;YACnE,IAAIN,YAAY,IAAI;gBAClBD,SAASU,IAAI,CAAC;oBAACJ;uBAAqBG;iBAAa;YACnD,OAAO;gBACLT,SAASU,IAAI,CAAC;oBAACT;oBAASK;uBAAqBG;iBAAa;YAC5D,CAAC;QACH;IACF;IAEA,OAAOT;AACT;AAEA,SAASW,yBACPC,QAAmB,EACnBC,YAAuB,EACvBC,iBAAoC,EACpCC,SAA4B,EAC5BC,IAAkD,EAClD;IACA,IAAIC,eAAe,KAAK;IAExBL,SAASM,MAAM,GAAGC,6BAAW,CAACC,KAAK;IACnCR,SAASS,WAAW,GAAGR,aAAaQ,WAAW;IAC/CT,SAASV,cAAc,GAAG,IAAIoB,IAAIT,aAAaX,cAAc;IAE7D,MAAMqB,qBAAqBzB,0BAA0BiB,WAAWS,GAAG,CACjE,CAACvB,UAAY;eAAIa;eAAsBb;SAAQ;IAGjD,KAAK,MAAMwB,gBAAgBF,mBAAoB;QAC7C,MAAMG,MAAMC,IAAAA,oDAAyB,EACnCf,UACAC,cACAY,cACAT;QAEF,IAAI,CAACU,CAAAA,cAAAA,KAAAA,IAAAA,IAAKE,cAAc,AAAD,GAAG;YACxBX,eAAe,IAAI;QACrB,CAAC;IACH;IAEA,OAAOA;AACT;AACO,SAAS/B,gBACdC,KAA2B,EAC3B0C,MAAsB,EACR;IACd,MAAM,EACJxC,IAAG,EACHyC,cAAa,EACbC,aAAY,EACZC,MAAK,EACL5C,QAAO,EACP6C,0BAAyB,EAC1B,GAAGJ;IACJ,MAAM,EAAEK,SAAQ,EAAEC,KAAI,EAAE,GAAG9C;IAC3B,MAAM+C,OAAOC,IAAAA,oCAAiB,EAAChD;IAC/B,MAAMC,cAAcyC,iBAAiB;IACrC,wFAAwF;IACxFO,IAAAA,sCAAkB,EAACnD,MAAMoD,aAAa;IAEtC,MAAMC,mBACJC,KAAKC,SAAS,CAACtD,QAAQG,YAAY,MAAMkD,KAAKC,SAAS,CAACvD,MAAMK,IAAI;IAEpE,IAAIgD,kBAAkB;QACpB,OAAO3C,IAAAA,4BAAa,EAACV,OAAOC;IAC9B,CAAC;IAED,IAAI0C,eAAe;QACjB,OAAO7C,kBAAkBE,OAAOC,SAASC,IAAIsD,QAAQ,IAAIrD;IAC3D,CAAC;IAED,IAAIsD,iBAAiBzD,MAAMoD,aAAa,CAACM,GAAG,CAACR,IAAAA,oCAAiB,EAAChD,KAAK,KAAK;IAEzE,IACE4C,6BACAW,CAAAA,yBAAAA,KAAAA,IAAAA,eAAgBE,IAAI,AAAD,MAAMC,gCAAY,CAACC,SAAS,EAC/C;QACA,MAAMhD,WAAWkC,SAASe,KAAK,CAAC;QAChC,wDAAwD;QACxDjD,SAASU,IAAI,CAAC;QAEd,wBAAwB;QACxB,kGAAkG;QAClG,MAAMwC,iBAAiBC,IAAAA,0CAAoB,EAACnD,UAAUb,MAAMK,IAAI,EAAE,KAAK;QAEvE,8DAA8D;QAC9D,MAAM4D,qBAAgC;YACpC,GAAGpB,KAAK;QACV;QAEA,mDAAmD;QACnD,+DAA+D;QAC/DoB,mBAAmBlC,MAAM,GAAGC,6BAAW,CAACC,KAAK;QAC7CgC,mBAAmB/B,WAAW,GAAGlC,MAAM6C,KAAK,CAACX,WAAW;QACxD+B,mBAAmBlD,cAAc,GAAG,IAAIoB,IAAInC,MAAM6C,KAAK,CAAC9B,cAAc;QAEtE,IAAIc;QAEJ,MAAMqC,gBAAgB,IAAM;YAC1B,IAAI,CAACrC,MAAM;gBACTA,OAAOsC,IAAAA,kDAAwB,EAC7BC,IAAAA,wCAAmB,EAAClE,KAAK6D,gBAAgB/D,MAAMqE,OAAO,EAAErE,MAAMsE,OAAO;YAEzE,CAAC;YACD,OAAOzC;QACT;QAEA,0EAA0E;QAC1E,6DAA6D;QAC7D,MAAM0C,8BAA8B1D,SACjC2D,KAAK,CAAC,GACNnC,GAAG,CAAC,CAACvB,UAAY;gBAAC;gBAAYA;aAAQ,EACtC2D,IAAI;QAEP,wGAAwG;QACxG,0HAA0H;QAC1H,MAAMlC,MAAMC,IAAAA,oDAAyB,EACnCyB,oBACAjE,MAAM6C,KAAK,EACX0B,6BACAL,eACA,IAAI;QAGN,gFAAgF;QAChF,IAAI,CAAC3B,CAAAA,cAAAA,KAAAA,IAAAA,IAAKE,cAAc,AAAD,GAAG;YACxBxC,QAAQG,YAAY,GAAGJ,MAAMK,IAAI;YACjCJ,QAAQyE,WAAW,GAAGX;YACtB9D,QAAQE,WAAW,GAAGA;YACtBF,QAAQ0E,YAAY,GAAG3B;YACvB/C,QAAQO,kBAAkB,GAAG,EAAE;YAC/BP,QAAQ4C,KAAK,GAAGoB;YAChBhE,QAAQM,YAAY,GAAG0C;YAEvBjD,MAAMoD,aAAa,CAACwB,GAAG,CAAC1B,IAAAA,oCAAiB,EAAChD,KAAK,KAAK,GAAG;gBACrD2B,MAAMgD,QAAQC,OAAO,CAACjD;gBACtB,iEAAiE;gBACjE8B,MAAMC,gCAAY,CAACC,SAAS;gBAC5BkB,cAAcC,KAAKC,GAAG;gBACtBC,sBAAsBlF,MAAMK,IAAI;gBAChC8E,cAAcH,KAAKC,GAAG;YACxB;YAEA,OAAOvE,IAAAA,4BAAa,EAACV,OAAOC;QAC9B,CAAC;IACH,CAAC;IAED,2DAA2D;IAC3D,IAAI,CAACwD,gBAAgB;QACnB,MAAM5B,OAAOsC,IAAAA,kDAAwB,EACnCC,IAAAA,wCAAmB,EAAClE,KAAKF,MAAMK,IAAI,EAAEL,MAAMqE,OAAO,EAAErE,MAAMsE,OAAO;QAGnE,MAAMc,mBAAmB;YACvBvD,MAAMgD,QAAQC,OAAO,CAACjD;YACtB,iEAAiE;YACjE8B,MAAMC,gCAAY,CAACC,SAAS;YAC5BkB,cAAcC,KAAKC,GAAG;YACtBC,sBAAsBlF,MAAMK,IAAI;YAChC8E,cAAc,IAAI;QACpB;QAEAnF,MAAMoD,aAAa,CAACwB,GAAG,CAAC1B,IAAAA,oCAAiB,EAAChD,KAAK,KAAK,GAAGkF;QACvD3B,iBAAiB2B;IACnB,CAAC;IAED,MAAMC,2BAA2BC,IAAAA,wDAA2B,EAAC7B;IAE7D,0DAA0D;IAC1D,MAAM,EAAEyB,qBAAoB,EAAErD,KAAI,EAAE,GAAG4B;IAEvC,0FAA0F;IAC1F,MAAM,CAAC8B,YAAYC,qBAAqB,GAAGC,IAAAA,gCAAe,EAAC5D;IAE3D,gGAAgG;IAChG4B,eAAe0B,YAAY,GAAGH,KAAKC,GAAG;IAEtC,4DAA4D;IAC5D,IAAI,OAAOM,eAAe,UAAU;QAClC,OAAOzF,kBAAkBE,OAAOC,SAASsF,YAAYpF;IACvD,CAAC;IAED,IAAIuF,cAAc1F,MAAMK,IAAI;IAC5B,IAAIqB,eAAe1B,MAAM6C,KAAK;IAC9B,IAAIrC,qBAA0C,EAAE;IAChD,KAAK,MAAMmF,kBAAkBJ,WAAY;QACvC,MAAM5D,oBAAoBgE,eAAenB,KAAK,CAC5C,GACA,CAAC;QAEH,0DAA0D;QAC1D,MAAM,CAAC5C,UAAU,GAAG+D,eAAenB,KAAK,CAAC,CAAC;QAE1C,wEAAwE;QACxE,IAAIoB,UAAUC,IAAAA,wDAA2B,EACvC,sBAAsB;QACtB;YAAC;eAAOlE;SAAkB,EAC1B+D,aACA9D;QAGF,kGAAkG;QAClG,6IAA6I;QAC7I,IAAIgE,YAAY,IAAI,EAAE;YACpBA,UAAUC,IAAAA,wDAA2B,EACnC,sBAAsB;YACtB;gBAAC;mBAAOlE;aAAkB,EAC1BuD,sBACAtD;QAEJ,CAAC;QAED,IAAIgE,YAAY,IAAI,EAAE;YACpB,IAAIE,IAAAA,wDAA2B,EAACJ,aAAaE,UAAU;gBACrD,OAAO9F,kBAAkBE,OAAOC,SAASgD,MAAM9C;YACjD,CAAC;YAED,IAAI4F,UAAUC,IAAAA,gCAAe,EAC3BtE,cACAmB,OACA8C,gBACAlC,eAAeE,IAAI,KAAK,UACtB0B,6BAA6BY,qDAAwB,CAACC,QAAQ;YAGlE,IACE,CAACH,WACDV,6BAA6BY,qDAAwB,CAACE,KAAK,EAC3D;gBACAJ,UAAUvE,yBACRqB,OACAnB,cACAC,mBACAC,WACA,wCAAwC;gBACxC,IACEwC,IAAAA,wCAAmB,EAAClE,KAAKwF,aAAa1F,MAAMqE,OAAO,EAAErE,MAAMsE,OAAO;YAExE,CAAC;YAED,MAAM8B,eAAeC,IAAAA,sCAAkB,EACrC,sBAAsB;YACtB;gBAAC;mBAAO1E;aAAkB,EAC1B+D;YAGF,IAAIU,cAAc;gBAChBvD,MAAMd,MAAM,GAAGC,6BAAW,CAACC,KAAK;gBAChC,mDAAmD;gBACnDY,MAAMX,WAAW,GAAGR,aAAaQ,WAAW;gBAE5CoE,IAAAA,4EAAqC,EACnCzD,OACAnB,cACAC;gBAEF,8EAA8E;gBAC9E1B,QAAQ4C,KAAK,GAAGA;YAClB,OAAO,IAAIkD,SAAS;gBAClB9F,QAAQ4C,KAAK,GAAGA;YAClB,CAAC;YAEDnB,eAAemB;YACf6C,cAAcE;YAEd,KAAK,MAAMW,cAAc5F,0BAA0BiB,WAAY;gBAC7D,MAAM4E,wBAAwB;uBAAI7E;uBAAsB4E;iBAAW;gBACnE,kFAAkF;gBAClF,IACEC,qBAAqB,CAACA,sBAAsBtF,MAAM,GAAG,EAAE,KACvD,eACA;oBACAV,mBAAmBe,IAAI,CAACiF;gBAC1B,CAAC;YACH;QACF,CAAC;IACH;IAEAvG,QAAQG,YAAY,GAAGJ,MAAMK,IAAI;IACjCJ,QAAQyE,WAAW,GAAGgB;IACtBzF,QAAQO,kBAAkB,GAAGA;IAC7BP,QAAQM,YAAY,GAAGiF,uBACnBtC,IAAAA,oCAAiB,EAACsC,wBAClBvC,IAAI;IACRhD,QAAQE,WAAW,GAAGA;IACtBF,QAAQ0E,YAAY,GAAG3B;IAEvB,OAAOtC,IAAAA,4BAAa,EAACV,OAAOC;AAC9B"}
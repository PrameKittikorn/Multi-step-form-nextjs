{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["ClientReferenceManifestPlugin","pluginState","getProxiedPluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","constructor","options","dev","appDir","appDirBase","path","dirname","sep","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","webpack","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","make","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","clientModules","entryCSSFiles","clientRequestsSet","collectClientRequest","mod","resource","buildInfo","rsc","requests","forEach","r","add","traverseModules","chunkGroups","chunkGroup","getAppPathRequiredChunks","chunks","map","requiredChunk","SYSTEM_ENTRYPOINTS","has","files","file","endsWith","id","flat","filter","nonNullable","requiredChunks","chunkEntryName","test","replace","modules","getFiles","f","startsWith","recordModule","isCSSModule","isCSSMod","layer","WEBPACK_LAYERS","appClient","type","_identifier","slice","lastIndexOf","push","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","relative","resourceResolveData","isClientComponentEntryModule","isAsyncModule","esmResource","addClientReference","exportName","async","edgeExportName","addSSRIdMapping","chunk","chunkModules","chunkGraph","getChunkModulesIterable","modId","getModuleId","anyModule","concatenatedMod","CLIENT_REFERENCE_MANIFEST","json","JSON","stringify","undefined","sources","RawSource"],"mappings":"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"}